#include <math.h>
#include <stdlib.h>

double Test_Cone_woNoiseY(double * x)
{
double Result;
double * Ei = (double *)malloc(30*sizeof(double));
double * Li = (double *)malloc(30*sizeof(double));
double U = 0.0;
double V = 0.0;

    //-------------------
    // List of partitions
    //-------------------

    // Partition n 1 partition name : part_uputx - [-3, -2.28][-3, -2.52](0.011376 , -0.69038 , -0.72087)
    // Partition n 2 partition name : part_ptttx - [0.6, 3][-3, -2.28](0.0919529 , 0.553387 , -0.817762)
    // Partition n 3 partition name : part_ilmcu - [-3, -1.56][-1.8, 0.12](0.106908 , -0.921427 , -0.331011)
    // Partition n 4 partition name : part_oerky - [0.6, 1.08][0.6, 2.04](0.0277233 , 0.546941 , 0.830828)
    // Partition n 5 partition name : part_kgufb - [-3, -2.28][0.12, 1.272](0.0298963 , -0.964738 , 0.245693)
    // Partition n 6 partition name : part_myhab - [-3, -2.28][1.272, 3](0.0409174 , -0.774302 , 0.62503)
    // Partition n 7 partition name : part_dykuk - [0.6, 0.696][-2.28, 0.6](0.715037 , -0.0454748 , -0.624699)
    // Partition n 8 partition name : part_uniqs - [-1.56, -0.264][-1.8, -1.416](0.0804118 , -0.482947 , -0.843472)
    // Partition n 9 partition name : part_khash - [-2.28, -0.552][0.12, 1.272](0.0671749 , -0.877798 , 0.440825)
    // Partition n 10 partition name : part_lffwb - [-2.28, -1.704][1.272, 3](0.0347556 , -0.684149 , 0.723978)
    // Partition n 11 partition name : part_qfwyv - [1.08, 3][-2.28, -1.704](0.0603422 , 0.710476 , -0.687386)
    // Partition n 12 partition name : part_iqlij - [-0.552, 0.6][0.12, 1.272](0.153484 , 0.0617728 , 0.887686)
    // Partition n 13 partition name : part_lksqh - [-0.264, 0.6][-1.8, 0.12](0.12561 , 0.262044 , -0.888176)
    // Partition n 14 partition name : part_yywwy - [-3, -2.28][-2.52, -1.8](0.0228256 , -0.774231 , -0.625282)
    // Partition n 15 partition name : part_milyr - [1.08, 3][-1.704, -0.3216](0.0651112 , 0.880671 , -0.450174)
    // Partition n 16 partition name : part_pndif - [-1.704, -1.2432][1.272, 3](0.0294862 , -0.562695 , 0.820673)
    // Partition n 17 partition name : part_eykcv - [-2.28, -1.704][-2.52, -1.8](0.0107674 , -0.673465 , -0.736364)
    // Partition n 18 partition name : part_efepf - [0.6, 3][2.04, 3](0.0669785 , 0.566438 , 0.819294)
    // Partition n 19 partition name : part_rpbuy - [1.08, 3][-0.3216, 0.6](0.0317827 , 0.98981 , 0.0719228)
    // Partition n 20 partition name : part_nxfxb - [0.696, 1.08][-2.28, -1.704](0.00389737 , 0.40846 , -0.912237)
    // Partition n 21 partition name : part_rqgwh - [-2.28, -1.128][-3, -2.52](0.0144478 , -0.518567 , -0.85395)
    // Partition n 22 partition name : part_hdjjx - [-1.2432, -0.13728][1.272, 3](0.0368685 , -0.306911 , 0.945357)
    // Partition n 23 partition name : part_kyjpx - [0.696, 0.7728][-1.704, 0.6](-0.299738 , 1.44507 , -0.500821)
    // Partition n 24 partition name : part_gaumw - [-1.704, -1.2432][-2.52, -1.8](0.00999558 , -0.564968 , -0.822611)
    // Partition n 25 partition name : part_lfnup - [-1.56, -0.264][-1.416, 0.12](0.115359 , -0.784627 , -0.552661)
    // Partition n 26 partition name : part_qbpbr - [0.7728, 1.08][-1.704, 0.6](0.245741 , 0.777714 , -0.433307)
    // Partition n 27 partition name : part_octjo - [1.08, 3][0.6, 2.04](0.0598539 , 0.834163 , 0.536205)
    // Partition n 28 partition name : part_yuqmp - [-1.128, 0.6][-3, -2.52](0.0395103 , -0.093775 , -0.995116)
    // Partition n 29 partition name : part_keqbg - [-1.2432, 0.6][-2.52, -1.8](0.0862158 , -0.136163 , -0.97762)
    // Partition n 30 partition name : part_lhngr - [-0.13728, 0.6][1.272, 3](0.0180442 , 0.113578 , 0.989991)

    //------------------------------------------
    // Liste of variables name and of boundaries
    //------------------------------------------

// X1 - [-3  3]
// X2 - [-3  3]
// Measure - [0.042855 4.24264]

    //---------------------------------------------------------------
    // For each partition i, we compute the membership function Ei(x)
    //---------------------------------------------------------------

 Ei[0] = exp(-0.5 * ( + pow(x[0] - -2.64, 2.0) / (double)0.0250906 + pow(x[1] - -2.76, 2.0) / (double)0.0111514));
 Ei[1] = exp(-0.5 * ( + pow(x[0] - 1.8, 2.0) / (double)0.278784 + pow(x[1] - -2.64, 2.0) / (double)0.0250906));
 Ei[2] = exp(-0.5 * ( + pow(x[0] - -2.28, 2.0) / (double)0.100362 + pow(x[1] - -0.84, 2.0) / (double)0.178422));
 Ei[3] = exp(-0.5 * ( + pow(x[0] - 0.84, 2.0) / (double)0.0111514 + pow(x[1] - 1.32, 2.0) / (double)0.100362));
 Ei[4] = exp(-0.5 * ( + pow(x[0] - -2.64, 2.0) / (double)0.0250906 + pow(x[1] - 0.696, 2.0) / (double)0.0642318));
 Ei[5] = exp(-0.5 * ( + pow(x[0] - -2.64, 2.0) / (double)0.0250906 + pow(x[1] - 2.136, 2.0) / (double)0.144522));
 Ei[6] = exp(-0.5 * ( + pow(x[0] - 0.648, 2.0) / (double)0.000446055 + pow(x[1] - -0.84, 2.0) / (double)0.401449));
 Ei[7] = exp(-0.5 * ( + pow(x[0] - -0.912, 2.0) / (double)0.0812934 + pow(x[1] - -1.608, 2.0) / (double)0.00713687));
 Ei[8] = exp(-0.5 * ( + pow(x[0] - -1.416, 2.0) / (double)0.144522 + pow(x[1] - 0.696, 2.0) / (double)0.0642318));
 Ei[9] = exp(-0.5 * ( + pow(x[0] - -1.992, 2.0) / (double)0.016058 + pow(x[1] - 2.136, 2.0) / (double)0.144522));
 Ei[10] = exp(-0.5 * ( + pow(x[0] - 2.04, 2.0) / (double)0.178422 + pow(x[1] - -1.992, 2.0) / (double)0.016058));
 Ei[11] = exp(-0.5 * ( + pow(x[0] - 0.0240002, 2.0) / (double)0.0642318 + pow(x[1] - 0.696, 2.0) / (double)0.0642318));
 Ei[12] = exp(-0.5 * ( + pow(x[0] - 0.168, 2.0) / (double)0.0361304 + pow(x[1] - -0.84, 2.0) / (double)0.178422));
 Ei[13] = exp(-0.5 * ( + pow(x[0] - -2.64, 2.0) / (double)0.0250906 + pow(x[1] - -2.16, 2.0) / (double)0.0250906));
 Ei[14] = exp(-0.5 * ( + pow(x[0] - 2.04, 2.0) / (double)0.178422 + pow(x[1] - -1.0128, 2.0) / (double)0.0924939));
 Ei[15] = exp(-0.5 * ( + pow(x[0] - -1.4736, 2.0) / (double)0.0102771 + pow(x[1] - 2.136, 2.0) / (double)0.144522));
 Ei[16] = exp(-0.5 * ( + pow(x[0] - -1.992, 2.0) / (double)0.016058 + pow(x[1] - -2.16, 2.0) / (double)0.0250906));
 Ei[17] = exp(-0.5 * ( + pow(x[0] - 1.8, 2.0) / (double)0.278784 + pow(x[1] - 2.52, 2.0) / (double)0.0446054));
 Ei[18] = exp(-0.5 * ( + pow(x[0] - 2.04, 2.0) / (double)0.178422 + pow(x[1] - 0.1392, 2.0) / (double)0.0411084));
 Ei[19] = exp(-0.5 * ( + pow(x[0] - 0.888, 2.0) / (double)0.00713687 + pow(x[1] - -1.992, 2.0) / (double)0.016058));
 Ei[20] = exp(-0.5 * ( + pow(x[0] - -1.704, 2.0) / (double)0.0642318 + pow(x[1] - -2.76, 2.0) / (double)0.0111514));
 Ei[21] = exp(-0.5 * ( + pow(x[0] - -0.69024, 2.0) / (double)0.0591961 + pow(x[1] - 2.136, 2.0) / (double)0.144522));
 Ei[22] = exp(-0.5 * ( + pow(x[0] - 0.7344, 2.0) / (double)0.000285475 + pow(x[1] - -0.552, 2.0) / (double)0.256927));
 Ei[23] = exp(-0.5 * ( + pow(x[0] - -1.4736, 2.0) / (double)0.0102771 + pow(x[1] - -2.16, 2.0) / (double)0.0250906));
 Ei[24] = exp(-0.5 * ( + pow(x[0] - -0.912, 2.0) / (double)0.0812934 + pow(x[1] - -0.648, 2.0) / (double)0.11419));
 Ei[25] = exp(-0.5 * ( + pow(x[0] - 0.9264, 2.0) / (double)0.0045676 + pow(x[1] - -0.552, 2.0) / (double)0.256927));
 Ei[26] = exp(-0.5 * ( + pow(x[0] - 2.04, 2.0) / (double)0.178422 + pow(x[1] - 1.32, 2.0) / (double)0.100362));
 Ei[27] = exp(-0.5 * ( + pow(x[0] - -0.264, 2.0) / (double)0.144522 + pow(x[1] - -2.76, 2.0) / (double)0.0111514));
 Ei[28] = exp(-0.5 * ( + pow(x[0] - -0.3216, 2.0) / (double)0.164434 + pow(x[1] - -2.16, 2.0) / (double)0.0250906));
 Ei[29] = exp(-0.5 * ( + pow(x[0] - 0.23136, 2.0) / (double)0.0263094 + pow(x[1] - 2.136, 2.0) / (double)0.144522));

    //--------------------------------------------------------
    // For each partition i, we compute the linear model Li(x)
    //--------------------------------------------------------

    Li[0] = 0.011376 + -0.69038 * x[0] + -0.72087 * x[1];
    Li[1] = 0.0919529 + 0.553387 * x[0] + -0.817762 * x[1];
    Li[2] = 0.106908 + -0.921427 * x[0] + -0.331011 * x[1];
    Li[3] = 0.0277233 + 0.546941 * x[0] + 0.830828 * x[1];
    Li[4] = 0.0298963 + -0.964738 * x[0] + 0.245693 * x[1];
    Li[5] = 0.0409174 + -0.774302 * x[0] + 0.62503 * x[1];
    Li[6] = 0.715037 + -0.0454748 * x[0] + -0.624699 * x[1];
    Li[7] = 0.0804118 + -0.482947 * x[0] + -0.843472 * x[1];
    Li[8] = 0.0671749 + -0.877798 * x[0] + 0.440825 * x[1];
    Li[9] = 0.0347556 + -0.684149 * x[0] + 0.723978 * x[1];
    Li[10] = 0.0603422 + 0.710476 * x[0] + -0.687386 * x[1];
    Li[11] = 0.153484 + 0.0617728 * x[0] + 0.887686 * x[1];
    Li[12] = 0.12561 + 0.262044 * x[0] + -0.888176 * x[1];
    Li[13] = 0.0228256 + -0.774231 * x[0] + -0.625282 * x[1];
    Li[14] = 0.0651112 + 0.880671 * x[0] + -0.450174 * x[1];
    Li[15] = 0.0294862 + -0.562695 * x[0] + 0.820673 * x[1];
    Li[16] = 0.0107674 + -0.673465 * x[0] + -0.736364 * x[1];
    Li[17] = 0.0669785 + 0.566438 * x[0] + 0.819294 * x[1];
    Li[18] = 0.0317827 + 0.98981 * x[0] + 0.0719228 * x[1];
    Li[19] = 0.00389737 + 0.40846 * x[0] + -0.912237 * x[1];
    Li[20] = 0.0144478 + -0.518567 * x[0] + -0.85395 * x[1];
    Li[21] = 0.0368685 + -0.306911 * x[0] + 0.945357 * x[1];
    Li[22] = -0.299738 + 1.44507 * x[0] + -0.500821 * x[1];
    Li[23] = 0.00999558 + -0.564968 * x[0] + -0.822611 * x[1];
    Li[24] = 0.115359 + -0.784627 * x[0] + -0.552661 * x[1];
    Li[25] = 0.245741 + 0.777714 * x[0] + -0.433307 * x[1];
    Li[26] = 0.0598539 + 0.834163 * x[0] + 0.536205 * x[1];
    Li[27] = 0.0395103 + -0.093775 * x[0] + -0.995116 * x[1];
    Li[28] = 0.0862158 + -0.136163 * x[0] + -0.97762 * x[1];
    Li[29] = 0.0180442 + 0.113578 * x[0] + 0.989991 * x[1];

    //-----------------------------
    // Computation of the numerator
    //-----------------------------

 U = 0.0;
 U += Li[0] * Ei[0];
 U += Li[1] * Ei[1];
 U += Li[2] * Ei[2];
 U += Li[3] * Ei[3];
 U += Li[4] * Ei[4];
 U += Li[5] * Ei[5];
 U += Li[6] * Ei[6];
 U += Li[7] * Ei[7];
 U += Li[8] * Ei[8];
 U += Li[9] * Ei[9];
 U += Li[10] * Ei[10];
 U += Li[11] * Ei[11];
 U += Li[12] * Ei[12];
 U += Li[13] * Ei[13];
 U += Li[14] * Ei[14];
 U += Li[15] * Ei[15];
 U += Li[16] * Ei[16];
 U += Li[17] * Ei[17];
 U += Li[18] * Ei[18];
 U += Li[19] * Ei[19];
 U += Li[20] * Ei[20];
 U += Li[21] * Ei[21];
 U += Li[22] * Ei[22];
 U += Li[23] * Ei[23];
 U += Li[24] * Ei[24];
 U += Li[25] * Ei[25];
 U += Li[26] * Ei[26];
 U += Li[27] * Ei[27];
 U += Li[28] * Ei[28];
 U += Li[29] * Ei[29];

    //-------------------------------
    // Computation of the denominator
    //-------------------------------

 V = 0.0;
 V += Ei[0];
 V += Ei[1];
 V += Ei[2];
 V += Ei[3];
 V += Ei[4];
 V += Ei[5];
 V += Ei[6];
 V += Ei[7];
 V += Ei[8];
 V += Ei[9];
 V += Ei[10];
 V += Ei[11];
 V += Ei[12];
 V += Ei[13];
 V += Ei[14];
 V += Ei[15];
 V += Ei[16];
 V += Ei[17];
 V += Ei[18];
 V += Ei[19];
 V += Ei[20];
 V += Ei[21];
 V += Ei[22];
 V += Ei[23];
 V += Ei[24];
 V += Ei[25];
 V += Ei[26];
 V += Ei[27];
 V += Ei[28];
 V += Ei[29];
  free(Ei);
  free(Li);
 Result =  (U/(double)V);
 return Result;
}
